errormas "Loading obsolete .topvars" ; sleep 1
# . ${MAS_SHLIB:-${MAS_MAS_DIR:-$HOME/.mas}/sh}/liblib.bash
function top_init ()
{
  declare -xg LIBGL_DEBUG=yes
  declare -xg  XDG_CONFIG_DIRS=$HOME/.xdgconfig

  if [[ "$XDG_SESSION_COOKIE" =~ ^(.+)-(.+)-(.+)$ ]] ; then 
    declare -xg MAS_XDG_ID=${BASH_REMATCH[1]}
    declare -xg MAS_XDG_STAMP=${BASH_REMATCH[2]}
    declare -xg MAS_XDG_SESSID=${BASH_REMATCH[3]}
  fi

  declare -xg MAS_MAS_DIR MAS_BASH_LOG_XDG MAS_LOG_ENV MAS_BASH_LOG
  if [[ "$MAS_XDG_ID" ]] && [[ "$MAS_XDG_STAMP" ]] && [[ "$MAS_XDG_SESSID" ]] ; then
    MAS_LOG_ENV=${MAS_LOG_ENV:=${MAS_BASH_LOG_XDG:=${MAS_BASH_LOG:=${MAS_MAS_DIR:=$HOME/.mas}/log}/xdg/$MAS_XDG_ID/$MAS_XDG_SESSID/$MAS_XDG_STAMP}/env}
  else
    MAS_LOG_ENV=${MAS_LOG_ENV:=${MAS_BASH_LOG_XDG:=${MAS_BASH_LOG:=${MAS_MAS_DIR:=$HOME/.mas}/log}}/env}
  fi
  if ! [[ -d "$MAS_LOG_ENV" ]] ; then
    mkdir -p "$MAS_LOG_ENV"
  fi

  declare -xg  MAS_SHLIB=${MAS_SHLIB:=${MAS_MAS_DIR:=$HOME/.mas}/sh}
  declare -xg    MAS_BIN=${MAS_BIN:=${MAS_MAS_DIR:=$HOME/.mas}/bin}
  declare -xg   MAS_BINZ=${MAS_BINZ:=${MAS_MAS_DIR:=$HOME/.mas}/bin}

  declare -xg   MAS_UBIN=${MAS_UBIN:=$HOME/ubin}

  declare -xg MAS_SAWFISH_BIN=${MAS_SAWFISH_BIN:=${MAS_UBIN:=$HOME/ubin}/sawfish}
  declare -xg MAS_SAWFISH_CLIENT_CMD=${MAS_SAWFISH_CLIENT_CMD:=/usr/bin/sawfish-client}
  
  declare -xg MAS_WHICH_CMD=${MAS_WHICH:=/usr/bin/which}
  declare -xg MAS_WHICH=${MAS_WHICH_CMD}
  declare -xg MAS_BASENAME=${MAS_BASENAME:=/usr/bin/basename}
  declare -xg MAS_PS_CMD=${MAS_PS_CMD:=/bin/ps}
  declare -xg MAS_STAT_CMD=${MAS_STAT_CMD:=/usr/bin/stat}
  declare -xg MAS_SLEEP_CMD=${MAS_SLEEP_CMD:=/bin/sleep}
  declare -xg MAS_ENV_CMD=${MAS_ENV_CMD:=/bin/env}
  declare -xg MAS_SED_CMD=${MAS_SED_CMD:=/bin/sed}
  declare -xg MAS_CAT_CMD=${MAS_CAT_CMD:=/bin/cat}
  declare -xg MAS_ECHO_CMD=${MAS_ECHO_CMD:=/bin/echo}
  declare -xg MAS_LS_CMD=${MAS_LS_CMD:=/bin/ls}
  declare -xg MAS_WC_CMD=${MAS_WC_CMD:=/bin/wc}
  declare -xg MAS_TTY_CMD=${MAS_TTY_CMD:=/bin/tty}

# if [[ -z "$MAS_SHLIB" ]] ; then echo "FATAL ERROR [$HOME] [$MAS_SHLIB]" >&2 ; exit 2  ; fi
# export MAS_NO_REGSCRIPT=yes
# export MAS_NO_REGSCRIPT_A=yes
# export MAS_NO_REGSCRIPT_CALLED=yes
  declare -xg MAS_LIB_NAME_PREFIX=lib
  declare -xg MAS_LIB_PREFIX=${MAS_LIB_PREFIX:=${MAS_SHLIB:=${MAS_MAS_DIR:=$HOME/.mas}/sh}/${MAS_LIB_NAME_PREFIX}}
  declare -xg MAS_LIB_SUFFIX=${MAS_LIB_SUFFIX:=.bash}
}
# ! type -t mas_set_self &>/dev/null && . ${MAS_BHOME:-$HOME}/.topfuncs
  [[ "${MAS_TOPFUNCS}" ]] && . ${MAS_TOPFUNCS}

mas_set_self
export -f top_init
top_init

# type -t typemas && echo "Have typemas" >&2

# vi: ft=sh
